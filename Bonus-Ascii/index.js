#!/usr/bin/env node

// ANSI color codes
const RED = '\x1b[31m';
const BRIGHT_RED = '\x1b[91m';
const DARK_RED = '\x1b[2;31m';
const RESET = '\x1b[0m';

// Animation frames for the Harvester logo
const frames = [
  // Frame 1 - Base logo
  `
${BRIGHT_RED}  ██╗  ██╗ █████╗ ██████╗ ██╗   ██╗███████╗███████╗████████╗███████╗██████╗
  ██║  ██║██╔══██╗██╔══██╗██║   ██║██╔════╝██╔════╝╚══██╔══╝██╔════╝██╔══██╗
  ███████║███████║██████╔╝██║   ██║█████╗  ███████╗   ██║   █████╗  ██████╔╝
  ██╔══██║██╔══██║██╔══██╗╚██╗ ██╔╝██╔══╝  ╚════██║   ██║   ██╔══╝  ██╔══██╗
  ██║  ██║██║  ██║██║  ██║ ╚████╔╝ ███████╗███████║   ██║   ███████╗██║  ██║
  ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝  ╚═══╝  ╚══════╝╚══════╝   ╚═╝   ╚══════╝╚═╝  ╚═╝${RESET}
`,

  // Frame 2 - With drips
  `
${BRIGHT_RED}  ██╗  ██╗ █████╗ ██████╗ ██╗   ██╗███████╗███████╗████████╗███████╗██████╗
  ██║  ██║██╔══██╗██╔══██╗██║   ██║██╔════╝██╔════╝╚══██╔══╝██╔════╝██╔══██╗
  ███████║███████║██████╔╝██║   ██║█████╗  ███████╗   ██║   █████╗  ██████╔╝
  ██╔══██║██╔══██║██╔══██╗╚██╗ ██╔╝██╔══╝  ╚════██║   ██║   ██╔══╝  ██╔══██╗
  ██║  ██║██║  ██║██║  ██║ ╚████╔╝ ███████╗███████║   ██║   ███████╗██║  ██║
  ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝  ╚═══╝  ╚══════╝╚══════╝   ╚═╝   ╚══════╝╚═╝  ╚═╝${RESET}
${RED}  ║    ║                ║         ║               ║                    ║${RESET}
`,

  // Frame 3 - Longer drips
  `
${BRIGHT_RED}  ██╗  ██╗ █████╗ ██████╗ ██╗   ██╗███████╗███████╗████████╗███████╗██████╗
  ██║  ██║██╔══██╗██╔══██╗██║   ██║██╔════╝██╔════╝╚══██╔══╝██╔════╝██╔══██╗
  ███████║███████║██████╔╝██║   ██║█████╗  ███████╗   ██║   █████╗  ██████╔╝
  ██╔══██║██╔══██║██╔══██╗╚██╗ ██╔╝██╔══╝  ╚════██║   ██║   ██╔══╝  ██╔══██╗
  ██║  ██║██║  ██║██║  ██║ ╚████╔╝ ███████╗███████║   ██║   ███████╗██║  ██║
  ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝  ╚═══╝  ╚══════╝╚══════╝   ╚═╝   ╚══════╝╚═╝  ╚═╝${RESET}
${RED}  ║    ║                ║         ║               ║                    ║
  ║    ║                             ║                                    ║${RESET}
`,

  // Frame 4 - Drips extending
  `
${BRIGHT_RED}  ██╗  ██╗ █████╗ ██████╗ ██╗   ██╗███████╗███████╗████████╗███████╗██████╗
  ██║  ██║██╔══██╗██╔══██╗██║   ██║██╔════╝██╔════╝╚══██╔══╝██╔════╝██╔══██╗
  ███████║███████║██████╔╝██║   ██║█████╗  ███████╗   ██║   █████╗  ██████╔╝
  ██╔══██║██╔══██║██╔══██╗╚██╗ ██╔╝██╔══╝  ╚════██║   ██║   ██╔══╝  ██╔══██╗
  ██║  ██║██║  ██║██║  ██║ ╚████╔╝ ███████╗███████║   ██║   ███████╗██║  ██║
  ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝  ╚═══╝  ╚══════╝╚══════╝   ╚═╝   ╚══════╝╚═╝  ╚═╝${RESET}
${RED}  ║    ║                ║         ║               ║                    ║
  ║    ║                             ║                                    ║
       ║                             ║                                    ║${RESET}
`,

  // Frame 5 - Drips falling
  `
${BRIGHT_RED}  ██╗  ██╗ █████╗ ██████╗ ██╗   ██╗███████╗███████╗████████╗███████╗██████╗
  ██║  ██║██╔══██╗██╔══██╗██║   ██║██╔════╝██╔════╝╚══██╔══╝██╔════╝██╔══██╗
  ███████║███████║██████╔╝██║   ██║█████╗  ███████╗   ██║   █████╗  ██████╔╝
  ██╔══██║██╔══██║██╔══██╗╚██╗ ██╔╝██╔══╝  ╚════██║   ██║   ██╔══╝  ██╔══██╗
  ██║  ██║██║  ██║██║  ██║ ╚████╔╝ ███████╗███████║   ██║   ███████╗██║  ██║
  ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝  ╚═══╝  ╚══════╝╚══════╝   ╚═╝   ╚══════╝╚═╝  ╚═╝${RESET}
${RED}  ║    ║                ║         ║               ║                    ║
  ║    ║                             ║                                    ║
       ║                ║            ║               ║                    ║${RESET}
${DARK_RED}                        ║                                            ${RESET}
`,

  // Frame 6 - Drips dispersing
  `
${BRIGHT_RED}  ██╗  ██╗ █████╗ ██████╗ ██╗   ██╗███████╗███████╗████████╗███████╗██████╗
  ██║  ██║██╔══██╗██╔══██╗██║   ██║██╔════╝██╔════╝╚══██╔══╝██╔════╝██╔══██╗
  ███████║███████║██████╔╝██║   ██║█████╗  ███████╗   ██║   █████╗  ██████╔╝
  ██╔══██║██╔══██║██╔══██╗╚██╗ ██╔╝██╔══╝  ╚════██║   ██║   ██╔══╝  ██╔══██╗
  ██║  ██║██║  ██║██║  ██║ ╚████╔╝ ███████╗███████║   ██║   ███████╗██║  ██║
  ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝  ╚═══╝  ╚══════╝╚══════╝   ╚═╝   ╚══════╝╚═╝  ╚═╝${RESET}
${RED}       ║                ║                         ║                    ║
                                   ║                                    ${RESET}
${DARK_RED}                        ║                       ║                    ${RESET}
`,
];

// Clear screen and move cursor to top
function clearScreen() {
  process.stdout.write('\x1b[2J\x1b[H');
}

// Hide cursor
function hideCursor() {
  process.stdout.write('\x1b[?25l');
}

// Show cursor
function showCursor() {
  process.stdout.write('\x1b[?25h');
}

// Animate the logo
async function animate() {
  hideCursor();
  let frameIndex = 0;
  let direction = 1;

  const interval = setInterval(() => {
    clearScreen();
    console.log(frames[frameIndex]);

    frameIndex += direction;

    // Reverse direction at boundaries for smooth loop
    if (frameIndex >= frames.length - 1) {
      direction = -1;
    } else if (frameIndex <= 0) {
      direction = 1;
    }
  }, 150); // 150ms between frames

  // Handle cleanup on exit
  process.on('SIGINT', () => {
    clearInterval(interval);
    clearScreen();
    showCursor();
    process.exit(0);
  });
}

// Start the animation
clearScreen();
animate();
